@startuml
actor Commuter
participant TVM
participant BillingProcessor
participant CardReader
participant PaymentPartner

Commuter -> TVM: pay()
TVM -> Commuter: displayOptions(Cash, Card)
Commuter -> TVM: selectPayment(Card)
TVM -> Commuter: displayCreditForm()
Commuter -> CardReader: insert(Card)
CardReader -> PaymentPartner: validate(Card)
PaymentPartner --> CardReader: Check: Ok
CardReader --> BillingProcessor: Check: Ok
Commuter -> TVM: enterInformation(account, PIN)
CardReader -> PaymentPartner: validateCardInformation(Card, account, PIN)
CardReader --> BillingProcessor: Check: credit card information OK
BillingProcessor -> PaymentPartner: processPayment()
PaymentPartner --> BillingProcessor: Check: payment processed
BillingProcessor --> TVM: approve()
TVM -> Commuter: display(invoice)
Commuter -> TVM: print(invoice)
TVM --> Commuter: Check: ok
@enduml